# ПЛАГИН «CONFIRMTHERIGHT» CMF COTONTI

<p><strong>Confirmtheright</strong>&nbsp;- плагин под Cotonti&nbsp;, с помощью которого можно подтверждать права на сайт методом загрузки файлов допустимых расширений на сервер, в корневую директорию. &nbsp;По умолчанию разрешены расширения .txt и .html, можно указать другие если понадобится.</p>

Confirmtheright - плагин под Cotonti , с помощью которого можно подтверждать права на сайт методом загрузки файлов допустимых расширений на сервер, в корневую директорию.  По умолчанию разрешены расширения .txt и .html, можно указать другие если понадобится.

Подтверждение права на сайт с помощью файла используется во многих системах, например в Yandex, Google (панель вебмастера), различные сервисы и каталоги. 

Загрузить файл можно и с помощью ftp клиента, или панели хостинга где есть файловый менеджер, но не все это умеют и понимают как пользоваться, особенно это касается ftp, поэтому и решил написать плагин с помощью которого админ может прямо из профиля загрузить проверочный файл на сервер, а после проверки там же удалить его.

Важно:  плагин создавался из рассчета на одноразовые проверки, по принципу загрузил проверил удалил. На данный момент в нем  два поля, это значит что одновременно может быть загружено максимум два файла. 

Чтобы загрузить новый файл при уже загруженном максимуме, нужно или удалить один из существующих, или создать дополнительное поле , о чем будет сказано ниже.

Изначально плагин создавался для работы с биржей сайтов, по просьбе одного активного сайттрейдера, который устал постоянно на ftp проверочные файлы заливать, теперь ему достаточно сделать упражнение " загрузил проверил удалил ". 

В большинстве систем есть возможность выбора варианта, например в Гугл вебмастер и Яндекс вебмастер, можно использовать подтверждение с помощью метатегов, один из самых быстрых и безопасных способов подтвердить права на сайт. 

Для подтверждения права на сайт с помощью метатегов, рекомендую использовать плагин boxes под Cotonti, в котором эта возможность появилась в последнем обновлении, а подтверждение с помощью загрузки файла на сервер делать только при отсутствии вышеуказанного варианта, и для одноразовых подтверждений не требующих дальнейшего нахождения файла на сервере.

Установка плагина Confirmtheright

Распаковать и залить содержимое в папку plugins.
Установить через админпанель: (Управление сайтом / Расширения / Confirmtheright).
Добавить в файл users.profile.tpl шаблона код приведенный ниже.
<!-- IF {PHP.cot_plugins_active.confirmtheright} AND {PHP.usr.isadmin} -->
    <tr>
        <td>{USERS_PROFILE_CONFIRMTHERIGHT1_TITLE} <small>( {PHP.cot_extrafields.cot_users.CONFIRMTHERIGHT1.field_variants} )</small></td>
        <td>{USERS_PROFILE_CONFIRMTHERIGHT1}</td>
    </tr>
    <tr>
        <td>{USERS_PROFILE_CONFIRMTHERIGHT2_TITLE} <small>( {PHP.cot_extrafields.cot_users.CONFIRMTHERIGHT2.field_variants} )</small></td>
        <td>{USERS_PROFILE_CONFIRMTHERIGHT2}</td>
    </tr>
<!-- ENDIF -->
Сам плагин работает таким образом, что не имеет своего интерфейса, он ему не нужен. Вся прелесть Cotonti в том что есть модульность, расширяемость, благодаря чему можно с помощью одного расширения использовать возможности другого, дополняя нужными.

В нашем случае плагин Confirmtheright использует возможности модуля Users, и экстраполя. При установке плагин создает несколько экстраполей, прописывая необходимые параметры, в том числе путь в корневую директорию. При удалении плагина, он удаляет экстраполя которые создавал.

Copyright (c) 2015 - today: WebRomen | https://github.com/WebRomen/confirmtheright
